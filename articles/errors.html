<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Odin parse errors • odin2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Odin parse errors">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">odin2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.43</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/odin2.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/fitting.html">Fitting odin2 models to data</a></li>
    <li><a class="dropdown-item" href="../articles/debugging.html">Debugging</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Details</h6></li>
    <li><a class="dropdown-item" href="../articles/details.html">Details</a></li>
    <li><a class="dropdown-item" href="../articles/errors.html">Odin parse errors</a></li>
    <li><a class="dropdown-item" href="../articles/functions.html">Supported Functions</a></li>
    <li><a class="dropdown-item" href="../articles/migrating.html">Migrating from odin 1.x.x</a></li>
    <li><a class="dropdown-item" href="../articles/packaging.html">Packaging odin models</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/odin2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Odin parse errors</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/odin2/blob/main/vignettes/errors.Rmd" class="external-link"><code>vignettes/errors.Rmd</code></a></small>
      <div class="d-none name"><code>errors.Rmd</code></div>
    </div>

    
    
<!--

    At present I'm doing this within R's vignette system, but it's
    not totally clear it will stay there.  Once things settle down,
    I'd like to improve this so that:

    * All errors are folded by default except the one linked to
    * We can easily parse the contents of the vignette into json
    * We can easily link between errors and link from the error thrown
      by R to the vignette or offline version

    For now we'll just focus on getting the content in and then make
    it usable later.  Most of the bits of detail here are pretty basic
    and expansion will happen later, focussed on the ones that people
    find confusing.

    This does also need to be easily linkable from wodin, and a
    machine readable version would be something that we could include
    in the app or send to the app as context.

    We might also include actual failing examples, alongside fixed
    versions, where that is useful.

-->
<p>This vignette outlines errors that might be generated when parsing
odin code, with more explanation about the error and how they can be
avoided. Don’t read this top to bottom as it’s quite boring! However, if
we get errors that benefit from more explanation about why they’ve been
thrown then we’ll expand on the contents here and arrange for these to
be linked from the thrown error directly.</p>
<p>The error numbers are arbitrary after the first digit. The first
digit will correspond to different phases of the parsing:</p>
<ul>
<li>
<code>E0xxx</code> - general errors</li>
<li>
<code>E1xxx</code> - errors during parsing of individual
expressions</li>
<li>
<code>E2xxx</code> - errors when considering the system as a
whole</li>
<li>
<code>E3xxx</code> - errors when during the analysis phase, after
validating the code</li>
</ul>
<p>When an error is thrown you will be directed here, for example:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">odin2</span><span class="fu">::</span><span class="fu"><a href="../reference/odin.html">odin</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fu">initial</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="fl">1</span> <span class="op">&lt;</span> <span class="fl">10</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `odin2::odin()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Unclassifiable expression</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Expected an assignment (with '&lt;-') or a relationship (with '~')</span></span>
<span><span class="co">#&gt; → Context:</span></span>
<span><span class="co">#&gt; 1 &lt; 10</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> For more information, run `odin2::odin_error_explain("E1001")`</span></span></code></pre></div>
<p>You can then print the explanation:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">odin2</span><span class="fu">::</span><span class="fu"><a href="../reference/odin_error_explain.html">odin_error_explain</a></span><span class="op">(</span><span class="st">"E1001"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">E1001</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; We were not able to classify an expression in your odin source code.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Example:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     a <span style="color: #D7AF00;">+</span> <span style="color: #D75FAF;">1</span></span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<div class="section level2">
<h2 id="e0001">
<code>E0001</code><a class="anchor" aria-label="anchor" href="#e0001"></a>
</h2>
<p>You have used a feature that is not yet implemented, but which is
intended to be implemented. Try again later. Probably the code you have
written works well in odin v1.x.x but has not been implemented in
odin2.</p>
<p>In some cases, code that produces this error may in future produce a
different error code, if implementation is forecast to take a while.</p>
</div>
<div class="section level2">
<h2 id="e1001">
<code>E1001</code><a class="anchor" aria-label="anchor" href="#e1001"></a>
</h2>
<p>We were not able to classify an expression in your odin source
code.</p>
<p>Example:</p>
<pre><code><span><span class="va">a</span> <span class="op">+</span> <span class="fl">1</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1002">
<code>E1002</code><a class="anchor" aria-label="anchor" href="#e1002"></a>
</h2>
<p>Invalid assignment of <code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code>. If you use
<code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code> on the right hand side of an expression, then the
left hand side must be a symbol.</p>
<p>Example:</p>
<pre><code><span><span class="fu">initial</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1003">
<code>E1003</code><a class="anchor" aria-label="anchor" href="#e1003"></a>
</h2>
<p>Invalid input to a special lhs function (<code>initial()</code>,
<code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code>, etc). These functions all (currently) accept a
single unnamed argument.</p>
<p>Examples:</p>
<pre><code><span><span class="fu">initial</span><span class="op">(</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="fu">initial</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="fu">initial</span><span class="op">(</span>x <span class="op">=</span> <span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1004">
<code>E1004</code><a class="anchor" aria-label="anchor" href="#e1004"></a>
</h2>
<p>Assignment to reserved words (in odin, C, C++ or JavaScript) is not
allowed. An example statement that would trigger this:</p>
<pre><code><span><span class="va">new</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">old</span></span></code></pre>
<p>This is an error because <a href="https://en.cppreference.com/w/cpp/language/new" class="external-link"><code>new</code>
is a keyword in C++</a>. The list of forbidden keywords can be found in
<code>vignette("functions"</code>) (Section: “Restricted names”).</p>
</div>
<div class="section level2">
<h2 id="e1005">
<code>E1005</code><a class="anchor" aria-label="anchor" href="#e1005"></a>
</h2>
<p>Invalid target on lhs of assignment or comparison relationship
(<code>~</code>). There are quite a few ways of being an invalid
assignment target, and at present they are all grouped within this
error. We may split these into different errors in future where
particular types of error are both common and difficult to
understand.</p>
<p>Examples:</p>
<pre><code><span><span class="fl">1</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></code></pre>
<p>The code above is valid R (as in, it can be parsed) but it is
nonsensical. Generally, the lhs of an assignment must be a symbol (e.g.,
<code>a &lt;- 1</code>).</p>
<p>This code is also reported if you have a spelling mistake, such
as</p>
<pre><code><span><span class="fu">inital</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></code></pre>
<p>instead of <code>initial(x)</code>, though we will try and suggest
the appropriate function if you have a near miss.</p>
<p>It is also reported with this code, which contains two legacy
errors.</p>
<pre><code><span></span>
<span><span class="fu">compare</span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">Normal</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></code></pre>
<p>Firstly, there is an error you may have made in the previous version,
in which the assignment <code>&lt;-</code> should be the comparison
symbol <code>~</code>. Furthermore, in this version, the
<code>compare()</code> function is not required at all, and you should
write <code>d ~ Normal(0, 1)</code>.</p>
<p>If you assign into an array, then the array name must be a symbol, so
this is invalid:</p>
<pre><code><span><span class="fu">f</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></code></pre>
<p>as is this:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv</a></span><span class="op">(</span><span class="fl">1</span><span class="op">[</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></code></pre>
<p>Sometimes you will see this error if you have accidentally nested
special functions</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1006">
<code>E1006</code><a class="anchor" aria-label="anchor" href="#e1006"></a>
</h2>
<p>Invalid call to the <code>parameter()</code> function, used on the
rhs of an assignment. If this error is thrown then we have failed to
parse the arguments of your call to <code>parameter</code>. The full
prototype of <code>parameter()</code> is:</p>
<pre><code><span><span class="fu">parameter</span><span class="op">(</span>default <span class="op">=</span> <span class="cn">NULL</span>, constant <span class="op">=</span> <span class="cn">NULL</span>, differentiate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
<p>We will fail to parse your call if:</p>
<ul>
<li>You provide more than three arguments</li>
<li>You provide named arguments that do not match the three above
(<code>default</code>, <code>constant</code> or
<code>differentiate</code>)</li>
</ul>
<p>Example:</p>
<pre><code><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>value <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre>
<p>This fails because <code>value</code> is not a valid keyword argument
to <code>parameter</code>.</p>
</div>
<div class="section level2">
<h2 id="e1007">
<code>E1007</code><a class="anchor" aria-label="anchor" href="#e1007"></a>
</h2>
<p>Invalid <code>default</code> argument to
<code>parameter()</code>.</p>
<p>Currently we support very little of odin’s syntax within the default
argument definition, though in future we may support more. It’s
complicated (and a bit confusing) to allow use of other variables here
because we end up with another copy of the dependency graph to consider
(we have to be able to resolve all the possible relationships between
quantities used as defaults <em>before</em> any of these quantities are
used). It’s not impossible to support this and in future we may consider
doing so.</p>
<p>At present, you may perform arithmetic operations on literal numbers.
This allows you to write:</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="fl">3</span><span class="op">)</span></span></code></pre>
<p>defining <code>a</code> to be a parameter with a default value of
<code>0.33333...</code> without having to write out a long floating
point number.</p>
</div>
<div class="section level2">
<h2 id="e1008">
<code>E1008</code><a class="anchor" aria-label="anchor" href="#e1008"></a>
</h2>
<p>Invalid <code>differentiate</code> argument to
<code>parameter()</code>. You have provided something other than a
literal <code>TRUE</code> or <code>FALSE</code> here (e.g., a missing
value, an expression or a symbol).</p>
</div>
<div class="section level2">
<h2 id="e1009">
<code>E1009</code><a class="anchor" aria-label="anchor" href="#e1009"></a>
</h2>
<p>Invalid <code>constant</code> argument to <code>parameter()</code>.
You have provided something other than a literal <code>NULL</code>,
<code>TRUE</code> or <code>FALSE</code> here (e.g., a missing value, an
expression or a symbol).</p>
</div>
<div class="section level2">
<h2 id="e1010">
<code>E1010</code><a class="anchor" aria-label="anchor" href="#e1010"></a>
</h2>
<p>Invalid call to <code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code> used on the right hand side.
Currently this function takes no arguments, though later we will expand
this to allow description of the data that you wish to use.</p>
<p>Example</p>
<pre><code><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span>integer <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
<p>Here, you have somewhat hopefully requested that <code>d</code> will
be data as an integer but we don’t yet support that. Probably this will
be supported in future, but the interface is not yet decided. For now
all data elements are assumed to be scalar reals.</p>
</div>
<div class="section level2">
<h2 id="e1012">
<code>E1012</code><a class="anchor" aria-label="anchor" href="#e1012"></a>
</h2>
<p><strong>Obsolete since 0.3.27, these problems are now included within
<a href="#e1005">E1005</a></strong></p>
<p>Invalid argument on the lhs of a <code>~</code> comparison.</p>
<p>Example</p>
<pre><code><span><span class="va">x</span> <span class="op">/</span> <span class="fl">2</span> <span class="op">~</span> <span class="fu">Normal</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fl">1</span> <span class="op">~</span> <span class="fu">Normal</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></code></pre>
<p>The lhs of a <code>~</code> comparison must be a symbol. We may
expand this in the future to support arrays too.</p>
</div>
<div class="section level2">
<h2 id="e1013">
<code>E1013</code><a class="anchor" aria-label="anchor" href="#e1013"></a>
</h2>
<p>Failed to parse the rhs of <code>~</code> as a valid distribution.
This can fail for many reasons, and the details of the failure come from
<code><a href="https://mrc-ide.github.io/monty/reference/monty_dsl_parse_distribution.html" class="external-link">monty::monty_dsl_parse_distribution</a></code></p>
<p>Example reasons for failure include the the rhs being:</p>
<ul>
<li>not a call (e.g., <code>x ~ 1</code>
</li>
<li>not a call to distribution function (e.g.,
<code>x ~ sqrt(2)</code>)</li>
<li>an invalid call (e.g., <code>x ~ Normal(0, 1, 2)</code>)</li>
</ul>
<p>The details for the failure will be included in the body of the error
message.</p>
</div>
<div class="section level2">
<h2 id="e1014">
<code>E1014</code><a class="anchor" aria-label="anchor" href="#e1014"></a>
</h2>
<p>Invalid assignment of <code>parameter()</code>. If you use
<code>parameter()</code> on the right hand side of an expression, then
the left hand side must be a symbol.</p>
<p>Example:</p>
<pre><code><span><span class="fu">initial</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1015">
<code>E1015</code><a class="anchor" aria-label="anchor" href="#e1015"></a>
</h2>
<p>Differentiable parameters must not be constant. You have written</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>constant <span class="op">=</span> <span class="cn">TRUE</span>, differentiate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
<p>which is impossible. Parameters that are differentiable need to be
able to be set by <code>dust::dust_system_update_pars()</code> as well
as on model creation.</p>
<p>Probably you want to set at least one of these to <code>FALSE</code>,
or omit the argument and accept the default.</p>
</div>
<div class="section level2">
<h2 id="e1016">
<code>E1016</code><a class="anchor" aria-label="anchor" href="#e1016"></a>
</h2>
<p>Failed to translate a <code>user()</code> expression (valid in odin
before version 2) into a call to <code>parameter()</code>. This was
likely code that would not work in old odin either.</p>
</div>
<div class="section level2">
<h2 id="e1017">
<code>E1017</code><a class="anchor" aria-label="anchor" href="#e1017"></a>
</h2>
<p>Compatibility issues were present in the system (e.g., using
<code>user()</code> instead of <code>parameter()</code> and the
compatibility action was <code>"error"</code>. You can, in the short
term, disable failure here by using
<code>compatibility = "warning"</code> or
<code>compatibility = "silent"</code>, but eventually this will become
an error that is always thrown when running with old odin code.</p>
<p>The error message will explain how to update your code to use new
odin2 syntax.</p>
</div>
<div class="section level2">
<h2 id="e1018">
<code>E1018</code><a class="anchor" aria-label="anchor" href="#e1018"></a>
</h2>
<p>Failed to parse a call to a stochastic function (e.g.,
<code>Normal()</code>). These errors come from
<code><a href="https://mrc-ide.github.io/monty/reference/monty_dsl_parse_distribution.html" class="external-link">monty::monty_dsl_parse_distribution</a></code>, typically where the
function call does not match arguments for any candidate call (some
distributions have multiple candidates, distinguished by argument
names).</p>
<p>Example calls that will fail:</p>
<pre><code>* `Normal(1, 2, 3)` -- too many arguments
* `Normal()` -- too few arguments
* `Normal(mu = 0, sd = 1)` -- invalid argument names</code></pre>
<p>The details for the failure will be included in the body of the error
message.</p>
</div>
<div class="section level2">
<h2 id="e1019">
<code>E1019</code><a class="anchor" aria-label="anchor" href="#e1019"></a>
</h2>
<p>Invalid value for the <code>zero_every</code> argument to
<code>initial()</code>. At present, this must be a literal value, and
that value must be an integer-like number (e.g., 2 or 2L). We may relax
this in future to allow more flexibility (e.g., a variable which
contains an integer-like number).</p>
<p>Examples that would error</p>
<pre><code><span><span class="fu">initial</span><span class="op">(</span><span class="va">x</span>, zero_every <span class="op">=</span> <span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="fu">initial</span><span class="op">(</span><span class="va">y</span>, zero_every <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">0</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1020">
<code>E1020</code><a class="anchor" aria-label="anchor" href="#e1020"></a>
</h2>
<p>The right hand side of a call to <code>initial()</code> that uses the
<code>zero_every</code> argument was not 0, but it must be. Because we
periodically reset values to zero, any initial condition other than zero
makes no sense. See <a href="https://mrc-ide.github.io/dust2/articles/periodic.html" class="external-link">the
<code>dust2</code> docs on periodic variables</a> for details.</p>
<p>Examples that would error</p>
<pre><code><span><span class="fu">initial</span><span class="op">(</span><span class="va">x</span>, zero_every <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="fu">initial</span><span class="op">(</span><span class="va">x</span>, zero_every <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">a</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1021">
<code>E1021</code><a class="anchor" aria-label="anchor" href="#e1021"></a>
</h2>
<p>Invalid use of a special array access variable (e.g., <code>i</code>,
<code>j</code>, <code>k</code>) on the right hand side of an expression.
The available index variables are determined by the rank (number of
dimensions) of the variable on the left hand side. If you have a vector
you can only use <code>i</code> on the right hand side, if you have a
matrix you can use <code>i</code> and <code>j</code> and so on.</p>
<p>Example causing an error:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">[</span><span class="va">i</span>, <span class="va">k</span><span class="op">]</span> <span class="op">+</span> <span class="va">a</span><span class="op">[</span><span class="va">i</span>, <span class="va">j</span><span class="op">]</span></span></code></pre></div>
<p>Above, we have used <code>k</code> on the rhs, but <code>x</code> is
only a matrix so this would not work. Think of the above statement as it
might appear in generated pseudo-code:</p>
<pre><code>for i in 1:nrow(x):
  for j in 1:ncol(x):
     x[i, j] &lt;- a[i, k] + a[i, j]</code></pre>
<p>and the reason that this is an error should be apparent.</p>
</div>
<div class="section level2">
<h2 id="e1022">
<code>E1022</code><a class="anchor" aria-label="anchor" href="#e1022"></a>
</h2>
<p>Invalid use of <code>:</code> within the left hand side of an array
assignment. We might increase the number of ways you can use this but
for now we are quite strict (the same rules as with version 1 of odin).
If you use <code>:</code> it must be the <em>outermost</em> operator
within an index, so this is fine:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="va">a</span><span class="op">:</span><span class="va">b</span><span class="op">]</span></span></code></pre></div>
<p>but this is not</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="va">a</span><span class="op">:</span><span class="va">b</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<p>This is because we can’t generally convert the latter type into a
<code>from:to</code> form, which we need for the code generation to
work, and also because R’s parsing rules are fairly ambiguous about if
this really means <code>(a:b) + 1</code> or a:(b + 1)`.</p>
</div>
<div class="section level2">
<h2 id="e1023">
<code>E1023</code><a class="anchor" aria-label="anchor" href="#e1023"></a>
</h2>
<p>Invalid functions used within an array index. At the moment you can
only use <code>:</code> (the range operator, which must be the outermost
function call), <code>+</code>, <code>-</code> and <code>(</code>. The
error will indicate the function that you have tried to use, and if you
feel this is unreasonable please let us know. We may expand the list of
supported functions within arrays in future, with candidates being
<code>*</code>, <code>%/%</code> and <code>%%</code>.</p>
</div>
<div class="section level2">
<h2 id="e1024">
<code>E1024</code><a class="anchor" aria-label="anchor" href="#e1024"></a>
</h2>
<p>Unary minus (<code>-</code> as “negative” rather than “minus”)
detected within arrays. This error is a special case of <a href="#e1023"><code>E1023</code></a> but deserves special mention here
because it has special meaning in R’s array access. In R, we can
write</p>
<pre><code><span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
<p>and this means “all of <code>x</code> except the first element”,
which is something we might support in future.</p>
</div>
<div class="section level2">
<h2 id="e1025">
<code>E1025</code><a class="anchor" aria-label="anchor" href="#e1025"></a>
</h2>
<p>Invalid use of <code>i</code>, <code>j</code>, etc on the left hand
side of an expression, for example:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">a</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span></code></pre></div>
<p>Usually, this error can be fixed by omitting the <code>i</code> from
the left hand side as you probably meant</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">a</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="e1026">
<code>E1026</code><a class="anchor" aria-label="anchor" href="#e1026"></a>
</h2>
<p>Something unexpected was used as an array index on the left hand side
of an array expression, such as:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="cn">TRUE</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="e1027">
<code>E1027</code><a class="anchor" aria-label="anchor" href="#e1027"></a>
</h2>
<p>You have tried to use a function that odin does not support.</p>
<p>Example:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/GammaDist.html" class="external-link">pgamma</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>It’s also possible that you have simply misspelt the function you
intended:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">sqt</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>Not all of R’s mathematical functions are supported, but please let
us know if you need something that we don’t support.</p>
</div>
<div class="section level2">
<h2 id="e1028">
<code>E1028</code><a class="anchor" aria-label="anchor" href="#e1028"></a>
</h2>
<p>Invalid call to an odin function. Usually, this means that you have
provided too many or too few arguments, or that you have provided a
named argument that the function does not support. The message should
guide you to fix the mistake, but the machinery for doing this
(currently) comes from <code>match.call</code> which can be unhelpful at
times.</p>
<p>Example:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">b</span>, <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>We don’t yet support <code>round</code>’s <code>digit</code>
argument, so this call will fail.</p>
</div>
<div class="section level2">
<h2 id="e1029">
<code>E1029</code><a class="anchor" aria-label="anchor" href="#e1029"></a>
</h2>
<p>Disallowed use of named arguments. For some primitive R functions
(e.g., <code>+</code> we disallow use of named argument forms). You are
unlikely to see this error, but we would be interested to know if you
do.</p>
</div>
<div class="section level2">
<h2 id="e1030">
<code>E1030</code><a class="anchor" aria-label="anchor" href="#e1030"></a>
</h2>
<p>Incorrect number of arguments to a function that does not accept
argument names. You are unlikely to see this error, but we would be
interested to know if you do.</p>
</div>
<div class="section level2">
<h2 id="e1031">
<code>E1031</code><a class="anchor" aria-label="anchor" href="#e1031"></a>
</h2>
<p>Invalid <code>type</code> argument to <code>parameter()</code>. You
have provided something other than a literal <code>"real"</code>,
<code>"integer"</code> or <code>"logical"</code> (e.g., a missing value,
an expression, symbol, or other string).</p>
</div>
<div class="section level2">
<h2 id="e1032">
<code>E1032</code><a class="anchor" aria-label="anchor" href="#e1032"></a>
</h2>
<p>Impossible attempt to differentiate parameter with non-real type. You
cannot differentiate integer or logical parameters. Example:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"integer"</span>, differentiate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Here, you must decide if <code>a</code> should be differentiable (in
which case remove the <code>type</code> argument) or an integer (in
which case remove the <code>differentiate</code> argument).</p>
</div>
<div class="section level2">
<h2 id="e1033">
<code>E1033</code><a class="anchor" aria-label="anchor" href="#e1033"></a>
</h2>
<p>The argument to sum must be an array. This can either be a complete
array (in which case the argument will be a symbol), or an indexed
array. So these are both fine:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">b</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span>, <span class="va">i</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>with the first summing over the whole array and the second summing
over rows (each element of <code>b</code> will contain a sum over the
corresponding row of <code>x</code>.</p>
<p>But these are errors:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">sum</span>(a <span class="sc">+</span> y)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>b[] <span class="ot">&lt;-</span> <span class="fu">sum</span>([, i] <span class="sc">+</span> <span class="dv">1</span>)</span></code></pre></div>
<p>Because summation is associative (or commutative) in this case we
could write:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">sum</span>(a) <span class="sc">+</span> <span class="fu">sum</span>(y)</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>b[] <span class="ot">&lt;-</span> <span class="fu">sum</span>([, i]) <span class="sc">+</span> <span class="dv">1</span></span></code></pre></div>
<p>but in more complicated cases you may have to jump through more hoops
to get the expression you want, and this may involve saving out an
intermediate variable. For example, rather than writing:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>You might write:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a>xx[] <span class="ot">&lt;-</span> x[i]<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">sum</span>(xx)</span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a><span class="co"># `E1034`</span></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a>Invalid use of <span class="st">`</span><span class="at">:</span><span class="st">`</span> within a partial sum.  If you use <span class="st">`</span><span class="at">:</span><span class="st">`</span> it must be the <span class="sc">*</span>outermost<span class="sc">*</span> operator within an index, so this is fine<span class="sc">:</span></span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a><span class="st">```</span><span class="at">r</span></span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a><span class="at">sum(x[a:b])</span></span></code></pre></div>
<p>but this is not</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">a</span><span class="op">:</span><span class="va">b</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>See <a href="#e1022">E1022</a> for more information in the case where
this same class of error is applied to indexing the left hand side of an
assignment.</p>
</div>
<div class="section level2">
<h2 id="e1035">
<code>E1035</code><a class="anchor" aria-label="anchor" href="#e1035"></a>
</h2>
<p>Invalid arguments to interpolation. The first two arguments
(<code>time</code> and <code>value</code>, respectively) must be symbols
corresponding to arrays. The whole array is used by
<code>interpolate()</code> so these cannot be subset.</p>
</div>
<div class="section level2">
<h2 id="e1036">
<code>E1036</code><a class="anchor" aria-label="anchor" href="#e1036"></a>
</h2>
<p>Invalid interpolation mode. The <code>mode</code> argument to
<code>interpolate</code> must be a string, and must be one of the values
<code>"constant"</code> (for piecewise constant), <code>"linear"</code>
(for piecewise linear) or <code>"spline"</code> (for cubic splines).</p>
<p>Example:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">interpolate</span><span class="op">(</span><span class="va">at</span>, <span class="va">ay</span>, <span class="st">"wiggly"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="e1037">
<code>E1037</code><a class="anchor" aria-label="anchor" href="#e1037"></a>
</h2>
<p>Calls to interpolate must be assigned to a symbol, because they
affect the <strong>whole</strong> structure. Rather than writing:</p>
<pre><code><span><span class="va">a</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">interpolate</span><span class="op">(</span><span class="va">at</span>, <span class="va">ay</span>, <span class="st">"linear"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></code></pre>
<p>we expect to see</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">interpolate</span><span class="op">(</span><span class="va">at</span>, <span class="va">ay</span>, <span class="st">"linear"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></code></pre>
<p>This is similar to the requirement that array-valued parameters are
assigned at once (in contrast to odin version 1).</p>
</div>
<div class="section level2">
<h2 id="e1038">
<code>E1038</code><a class="anchor" aria-label="anchor" href="#e1038"></a>
</h2>
<p>This equation cannot reference itself. There are some types of
equations that <strong>can</strong> reference themselves, for
example:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span>         <span class="co"># references 'x' from the previous step</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">x</span>              <span class="co"># derivative referencing the actual variable</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="va">n</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">/</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span> <span class="op">-</span> <span class="fl">1</span><span class="op">]</span>  <span class="co"># referencing elsewhere in the array</span></span></code></pre>
<p>However, in general this makes little sense and is disallowed, for
example:</p>
<pre><code><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="va">b</span> <span class="op">+</span> <span class="fl">1</span></span></code></pre>
<p>This is not allowed because we have a cycle in the graph for
<code>b</code> (a special case of <a href="#e2005">E2005</a>).</p>
</div>
<div class="section level2">
<h2 id="e1039">
<code>E1039</code><a class="anchor" aria-label="anchor" href="#e1039"></a>
</h2>
<p>Array extent cannot be stochastic. This is really a special case of
<a href="#e2011">E2011</a> but detectable in a single expression. An
example that would throw this error is:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">Poisson</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1040">
<code>E1040</code><a class="anchor" aria-label="anchor" href="#e1040"></a>
</h2>
<p>Array extent cannot be determined by time. This is really a special
case of <a href="#e2011">E2011</a> but detectable in a single
expression. An example that would throw this error is:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="va">time</span> <span class="op">&gt;</span> <span class="fl">10</span><span class="op">)</span> <span class="fl">100</span> <span class="kw">else</span> <span class="fl">20</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1041">
<code>E1041</code><a class="anchor" aria-label="anchor" href="#e1041"></a>
</h2>
<p>Special functions on the right-hand-side of an expression must be the
only expression there. This applies to <code>parameter()</code>,
<code>interpolate()</code>, <code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code> and
<code>delay()</code>; if these are used they must be the
<strong>only</strong> expression on the right hand side.</p>
<p>For example you cannot write:</p>
<pre><code><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">interpolate</span><span class="op">(</span><span class="va">at</span>, <span class="va">ay</span><span class="op">)</span> <span class="op">+</span> <span class="fu">interpolate</span><span class="op">(</span><span class="va">bt</span>, <span class="va">by</span><span class="op">)</span></span></code></pre>
<p>You might write this as:</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">interpolate</span><span class="op">(</span><span class="va">at</span>, <span class="va">ay</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">interpolate</span><span class="op">(</span><span class="va">bt</span>, <span class="va">by</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">+</span> <span class="va">b</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1042">
<code>E1042</code><a class="anchor" aria-label="anchor" href="#e1042"></a>
</h2>
<p>Invalid special function used on the right hand side. Some odin
functions can only be used on the lhs; these include
<code>initial</code>, <code>update</code> and <code>deriv</code>. So you
cannot write this:</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1043">
<code>E1043</code><a class="anchor" aria-label="anchor" href="#e1043"></a>
</h2>
<p>Invalid functions used in expression for <code><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim()</a></code>.
Currently <code><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim()</a></code> is quite limited in what it can accept
(though slightly more relaxed than <code>odin1</code>). You can use
<code>+</code>, <code>-</code>, <code>(</code>, <code>length</code>,
<code>nrow</code> and <code>ncol</code> but nothing else. Let us know if
you think you should be able to use more.</p>
</div>
<div class="section level2">
<h2 id="e1044">
<code>E1044</code><a class="anchor" aria-label="anchor" href="#e1044"></a>
</h2>
<p>Attempt to call something which is not the <strong>name</strong> of a
function. This might be</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
<p>where <code>1</code> is not a symbol, so this fails. Other possible
errors, which are valid R code but not valid odin code, might
include:</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">f</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre>
<p>where <code>f(x)</code> might return a function in R, but this is not
possible in odin.</p>
</div>
<div class="section level2">
<h2 id="e1045">
<code>E1045</code><a class="anchor" aria-label="anchor" href="#e1045"></a>
</h2>
<p>Attempt to use one of R’s reserved words: <code>function</code>,
<code>while</code>, <code>repeat</code>, <code>for</code>, etc.</p>
</div>
<div class="section level2">
<h2 id="e1046">
<code>E1046</code><a class="anchor" aria-label="anchor" href="#e1046"></a>
</h2>
<p>All <code>if</code> statements must have an <code>else</code> clause.
You cannot write:</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="va">condition</span><span class="op">)</span> <span class="fl">1</span></span></code></pre>
<p>as this is really the same as (in R)</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="va">condition</span><span class="op">)</span> <span class="fl">1</span> <span class="kw">else</span> <span class="cn">NULL</span></span></code></pre>
<p>which would not be valid in odin because we can’t assign a
<code>NULL</code> value. Always provide an <code>else</code> branch.</p>
</div>
<div class="section level2">
<h2 id="e1047">
<code>E1047</code><a class="anchor" aria-label="anchor" href="#e1047"></a>
</h2>
<p>Assignment to a name that starts with a restricted prefix. Names
cannot begin with <code>odin_</code>, <code>interpolate_</code>,
<code>delay_</code> or <code>adjoint_</code>.</p>
<p>An example that would trigger this:</p>
<pre><code><span><span class="va">delay_cases_days</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1048">
<code>E1048</code><a class="anchor" aria-label="anchor" href="#e1048"></a>
</h2>
<p>Cannot assign to <code>time</code>. Prior to odin2, this was allowed
as <code>t</code> was the name for time in continuous-time models and
discrete time models sometimes wrote:</p>
<pre><code><span><span class="va">time</span> <span class="op">&lt;-</span> <span class="va">step</span> <span class="op">*</span> <span class="va">dt</span></span></code></pre>
<p>We can migrate the above special case, but any other assignments to
<code>time</code> are disallowed, and you will need to update your
model. See <code><a href="../articles/migrating.html">vignette("migrating")</a></code> for more information.</p>
</div>
<div class="section level2">
<h2 id="e1049">
<code>E1049</code><a class="anchor" aria-label="anchor" href="#e1049"></a>
</h2>
<p>Cannot assign to <code>dt</code>. Prior to odin2, this was how
<code>dt</code> was controlled, but now you should control
<code>dt</code> via <code><a href="https://mrc-ide.github.io/dust2/reference/dust_system_create.html" class="external-link">dust2::dust_system_create</a></code> and
<code><a href="https://mrc-ide.github.io/dust2/reference/dust_filter_create.html" class="external-link">dust2::dust_filter_create</a></code> etc. Previously you might have
written</p>
<pre><code><span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span> <span class="co"># or really user() in old odin code</span></span></code></pre>
<p>but this is no longer allowed. We can migrate this special case, but
other uses such as</p>
<pre><code><span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></span></code></pre>
<p>are disallowed and you will need to update your model. See
<code><a href="../articles/migrating.html">vignette("migrating")</a></code> for more information.</p>
</div>
<div class="section level2">
<h2 id="e1050">
<code>E1050</code><a class="anchor" aria-label="anchor" href="#e1050"></a>
</h2>
<p>Cannot use <code>step</code> within discrete time models. Prior to
odin version 2, the <code>step</code> variable was automatically
provided by odin to be the time basis for discrete time models; models
started at step 0 and increased by one each time step. We no longer
support this, and instead models start at some real-valued (but
integral) time and increment with a step size of <code>dt</code> (which
must be of the form <code>1 / &lt;integer&gt;</code>).</p>
<p>You will need to adapt your code to fix this error, and this may
require features that we are still developing. Please see
<code><a href="../articles/migrating.html">vignette("migrating")</a></code> for details.</p>
</div>
<div class="section level2">
<h2 id="e1051">
<code>E1051</code><a class="anchor" aria-label="anchor" href="#e1051"></a>
</h2>
<p>Array parameters cannot have defaults. If <code>a</code> is an array
(of any rank), then this is an error:</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>In future, we may allow this to allow filling an array with a value
on initialisation. However, if we did this we’d also like to support
something like</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>to have a default value of vector of 1:3; however this is quite hard
to validate and generalises poorly to higher dimensions. Your thoughts
and use-cases are very welcome.</p>
</div>
<div class="section level2">
<h2 id="e1052">
<code>E1052</code><a class="anchor" aria-label="anchor" href="#e1052"></a>
</h2>
<p>Failed to parse call to <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>. If this error is thrown
then we have failed to parse the arguments of your call to
<code>print</code>. The full prototype of <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> is:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">string</span>, when <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre>
<p>We will fail to parse your call if:</p>
<ul>
<li>You provide more than two arguments</li>
<li>You provide named arguments that do not match the two above
(<code>string</code>, <code>when</code>)</li>
</ul>
</div>
<div class="section level2">
<h2 id="e1053">
<code>E1053</code><a class="anchor" aria-label="anchor" href="#e1053"></a>
</h2>
<p>Invalid first (<code>string</code>) argument to <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>.
This argument must be a string, it must be parseable by
<code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue::glue()</a></code> using curly-brace delimiters, and it must
contain at least one template argument.</p>
<p>If you see this error, it’s likely you have failed to terminate a
template, such as:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"v: {value"</span><span class="op">)</span></span></code></pre>
<p>Here, we might have meant to write <code>"v: {value}"</code> (note
the closing <code>}</code>), but because we did not terminate the
template, <code>glue</code> failed to parse the string.</p>
</div>
<div class="section level2">
<h2 id="e1054">
<code>E1054</code><a class="anchor" aria-label="anchor" href="#e1054"></a>
</h2>
<p>Failed to parse template within print string. Unlike <a href="#e1053">E1053</a> this is an error <strong>within</strong> a
template. Typically this will be one of two issues:</p>
<ul>
<li>The expression within <code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{}</a></code> is not valid R</li>
<li>The format specifier after <code>;</code> is not interpretable (see
<code><a href="../articles/debugging.html">vignette("debugging")</a></code> for details)</li>
</ul>
<p>Examples</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"x: {x + }"</span><span class="op">)</span> <span class="co"># invalid as `x +` is an incomplete expression</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"x: {x; q}"</span><span class="op">)</span> <span class="co"># invalid as `q` is not an sprintf format</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1055">
<code>E1055</code><a class="anchor" aria-label="anchor" href="#e1055"></a>
</h2>
<p>Invalid use of <code>rank</code> argument to <code>parameter()</code>
call that does not assign to dimensions. You might have written</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>rank <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre>
<p>but this is not the place to include the <code>rank</code> argument.
Instead, it should go onto the call with <code>dim(a)</code> on the
left-hand-side.</p>
</div>
<div class="section level2">
<h2 id="e1056">
<code>E1056</code><a class="anchor" aria-label="anchor" href="#e1056"></a>
</h2>
<p>Missing <code>rank</code> argument to call to
<code>parameter()</code> which assigns to <code><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim()</a></code>. You may
have written</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>but here we need to know what rank <code>a</code> is (is it a vector,
matrix, etc). You can fix this by writing</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>rank <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre>
<p>with the value of the <code>rank</code> argument being a literal
integer. See <code><a href="../articles/functions.html">vignette("functions")</a></code> for more information on
this interface.</p>
</div>
<div class="section level2">
<h2 id="e1057">
<code>E1057</code><a class="anchor" aria-label="anchor" href="#e1057"></a>
</h2>
<p>Invalid value for <code>rank</code> argument to
<code>parameter()</code>. Where given it must be a positive size;
literally an integer value of 1, 2, 3, …, 8. You cannot use a variable
here.</p>
</div>
<div class="section level2">
<h2 id="e1058">
<code>E1058</code><a class="anchor" aria-label="anchor" href="#e1058"></a>
</h2>
<p>Failed to migrate expression of form</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">user</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>because we never found an assignment like</p>
<pre><code><span><span class="va">a</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">user</span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>where we could determine the rank. This might be because you’ve
removed the square brackets from the original, or the original
assignment is simply missing. If your code does compile with odin1 but
you see this error code please let us know.</p>
</div>
<div class="section level2">
<h2 id="e1059">
<code>E1059</code><a class="anchor" aria-label="anchor" href="#e1059"></a>
</h2>
<p>Failed to parse call to <code><a href="https://rdrr.io/r/base/browser.html" class="external-link">browser()</a></code>. Note that while this
shares ideas and a core implementation with R’s <code><a href="https://rdrr.io/r/base/browser.html" class="external-link">browser()</a></code>,
the call in odin code is different and must have the form</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/browser.html" class="external-link">browser</a></span><span class="op">(</span><span class="va">phase</span>, <span class="va">when</span><span class="op">)</span></span></code></pre></div>
<p>where <code>phase</code> is the phase to evaluate the browser (one of
<code>update</code> or <code>deriv</code> for now) and <code>when</code>
is an expression describing the conditions to evaluate the
<code>browser</code> call.</p>
</div>
<div class="section level2">
<h2 id="e1060">
<code>E1060</code><a class="anchor" aria-label="anchor" href="#e1060"></a>
</h2>
<p>Invalid <code>phase</code> argument for call to
<code><a href="https://rdrr.io/r/base/browser.html" class="external-link">browser()</a></code>. Currently this must be one of
<code>update</code> or <code>deriv</code>, but we may expand this in
future.</p>
</div>
<div class="section level2">
<h2 id="e1061">
<code>E1061</code><a class="anchor" aria-label="anchor" href="#e1061"></a>
</h2>
<p>You can use the built-in constant <code>pi</code> on the right hand
side of an expression, without setting it. You should not use it on the
left-hand side of any expression.</p>
</div>
<div class="section level2">
<h2 id="e1062">
<code>E1062</code><a class="anchor" aria-label="anchor" href="#e1062"></a>
</h2>
<p>Cannot use missing values (<code>NA</code>) within expressions.
Handling of missing values in C++ code is complicated, particularly
following the semantics that R uses, with missing values for integers
and logicals, and sensible propagation of missingness through
expressions. In most systems a missing value will propagate though the
whole system very quickly and we don’t expect this is very useful.</p>
<p>Example code that would throw this error:</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="e1063">
<code>E1063</code><a class="anchor" aria-label="anchor" href="#e1063"></a>
</h2>
<p>Trying to use the arguments <code>min</code> or <code>max</code> in a
<code>parameter()</code> call defining a logical parameter. This is not
supported because logical parameters can only take the values
<code>TRUE</code> and <code>FALSE</code>. Example code that would throw
this error:</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"logical"</span>, min <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="e1064">
<code>E1064</code><a class="anchor" aria-label="anchor" href="#e1064"></a>
</h2>
<p>Invalid argument for <code>min</code> or <code>max</code> in a
<code>parameter()</code> call. You can only use numbers here, not
expressions or symbols. We may relax this in future, so please let us
know if this is a problem.</p>
<p>Example assignments that would throw this error:</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>min <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span>  <span class="co"># 1/2 is really an expression, use 0.5 instead</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>max <span class="op">=</span> <span class="va">a</span><span class="op">)</span>    <span class="co"># would create dependency issues</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>min <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># not a number</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>max <span class="op">=</span> <span class="cn">NaN</span><span class="op">)</span>  <span class="co"># also not a number!</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="e1065">
<code>E1065</code><a class="anchor" aria-label="anchor" href="#e1065"></a>
</h2>
<p>Impossible range implied by <code>min</code> and <code>max</code> in
<code>parameter()</code> call. This is thrown when <code>min</code> is
greater than or equal to <code>max</code> as either this means you
really have a constant, or no value can satisfy the relationship.</p>
<p>Example assignment that would throw this error</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>min <span class="op">=</span> <span class="fl">10</span>, max <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1066">
<code>E1066</code><a class="anchor" aria-label="anchor" href="#e1066"></a>
</h2>
<p>The <code>dim</code> function when used on the right hand side only
takes the name of an array whose dimensions are to be copied. For
example:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span></code></pre>
<p>are both valid, resulting in both <code>b</code> and <code>c</code>
having the same dimensions as <code>a</code>. Below, however, are all
incorrect:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">b</span><span class="op">[</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span> <span class="op">*</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span> <span class="op">+</span> <span class="fl">5</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e1067">
<code>E1067</code><a class="anchor" aria-label="anchor" href="#e1067"></a>
</h2>
<p>Invalid call top the to <code>delay()</code> function, used on the
rhs of an assignment. If this error is thrown then we have failed to
parse the arguments of your call to <code>delay</code>. The full
prototype of <code>delay()</code> is:</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">delay</span><span class="op">(</span><span class="va">what</span>, <span class="va">by</span><span class="op">)</span></span></code></pre></div>
<p>with both arguments required and typically unnamed.</p>
<p>We will fail to parse your call if:</p>
<ul>
<li>You provide any number other than two arguments</li>
<li>You provide named arguments that do not match the two above
(<code>what</code> and <code>by</code>)</li>
</ul>
</div>
<div class="section level2">
<h2 id="e1068">
<code>E1068</code><a class="anchor" aria-label="anchor" href="#e1068"></a>
</h2>
<p>The first (<code>what</code>) argument to <code>delay()</code> must
be a symbol; the name of a variable or derived quantity to delay. It
cannot (currently at least) be a complex expression, though we may relax
this in future, and it cannot be a number.</p>
<p>Examples that would cause this error:</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">delay</span><span class="op">(</span><span class="va">a</span> <span class="op">+</span> <span class="fl">1</span>, <span class="va">tau</span><span class="op">)</span></span>
<span><span class="fu">delay</span><span class="op">(</span><span class="fl">1</span>, <span class="va">tau</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="e1069">
<code>E1069</code><a class="anchor" aria-label="anchor" href="#e1069"></a>
</h2>
<p>The second (<code>by</code>) argument to <code>delay()</code> must be
a symbol or a number. It cannot be a complex expression. An example that
would cause this error:</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">delay</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>You can fix this by writing:</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">delay</span><span class="op">(</span><span class="va">a</span>, <span class="va">b1</span><span class="op">)</span></span>
<span><span class="va">b1</span> <span class="op">&lt;-</span> <span class="va">b</span> <span class="op">+</span> <span class="fl">1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="e1070">
<code>E1070</code><a class="anchor" aria-label="anchor" href="#e1070"></a>
</h2>
<p>Calls to delay must be assigned to a symbol, because they affect the
<strong>whole</strong> structure. Rather than writing:</p>
<pre><code><span><span class="va">a</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">delay</span><span class="op">(</span><span class="va">b</span>, <span class="va">tau</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></code></pre>
<p>we expect to see</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">delay</span><span class="op">(</span><span class="va">b</span>, <span class="va">tau</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></code></pre>
<p>This is similar to the requirement that array-valued parameters are
assigned at once (in contrast to odin version 1).</p>
</div>
<div class="section level2">
<h2 id="e2001">
<code>E2001</code><a class="anchor" aria-label="anchor" href="#e2001"></a>
</h2>
<p>Your system of equations does not include any expressions with
<code>initial()</code> on the lhs. This is what we derive the set of
variables from, so at least one must be present.</p>
</div>
<div class="section level2">
<h2 id="e2002">
<code>E2002</code><a class="anchor" aria-label="anchor" href="#e2002"></a>
</h2>
<p>No call to <code><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv()</a></code> or <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> on the lhs
of any equation. Every call to <code>initial()</code> requires a call to
<code><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv()</a></code> or <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code>, and when there is not
even a single call to either of these we can’t tell what sort of time
your model runs in (i.e., if it works in continuous or discrete time).
This error is related to <code>E2004</code>, but separate because we
can’t describe what is missing properly.</p>
</div>
<div class="section level2">
<h2 id="e2003">
<code>E2003</code><a class="anchor" aria-label="anchor" href="#e2003"></a>
</h2>
<p>Variables are missing initial conditions.</p>
<p>All variables used in <code><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv()</a></code> or <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code>
require a corresponding entry in <code>initial()</code> to set their
initial conditions. The error will highlight all lines that have a
<code><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv()</a></code> or <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> call that lacks a call to
<code>initial()</code>. This can sometimes be because you have a
spelling error in your call to <code>initial()</code>.</p>
</div>
<div class="section level2">
<h2 id="e2004">
<code>E2004</code><a class="anchor" aria-label="anchor" href="#e2004"></a>
</h2>
<p>Variables are missing calls to <code><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv()</a></code> or
<code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code></p>
<p>You have a system where you use different equations for
<code><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv()</a></code>/<code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> to the variables defined in
<code>initial()</code>. This is an error if there are equations in
<code><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv()</a></code>/<code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> that don’t have a
corresponding equation using <code>initial()</code>, or if you have
equations in <code>initial()</code> that don’t have a corresponding
<code><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv()</a></code> or <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> equation. The error will
highlight all lines that might be involved in the error.</p>
</div>
<div class="section level2">
<h2 id="e2005">
<code>E2005</code><a class="anchor" aria-label="anchor" href="#e2005"></a>
</h2>
<p>Cyclic dependency detected within equations. There are a few ways
this can happen. The simplest is that your equation references itself,
for example:</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">+</span> <span class="fl">1</span></span></code></pre></div>
<p>Unlike in R, this is disallowed, as each variable may only be
assigned to once within the target function of your system. Each
assignment is much more like mathematical equation than usual
programming statements.</p>
<p>You can get more complicated cycles, for example:</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">c</span> <span class="op">/</span> <span class="fl">2</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">+</span> <span class="fl">1</span></span></code></pre></div>
<p>Here <code>a</code> depends on <code>c</code>, <code>c</code> depends
on <code>b</code> and <code>b</code> depends on <code>a</code>. The
error will reference all the variables involved in cycle.</p>
<p>It is possible that there is more than one cycle within the reported
expressions.</p>
</div>
<div class="section level2">
<h2 id="e2006">
<code>E2006</code><a class="anchor" aria-label="anchor" href="#e2006"></a>
</h2>
<p>Undefined variable used in an equation. This error means that you
have referenced some variable that does not exist within the odin
system. Common reasons for this error include:</p>
<ul>
<li>A spelling mistake: you’ve referenced a variable that is very
similar to the one that you meant to (we may add “did you mean support”
in future; let us know if this would have saved you time).</li>
<li>Trying to reference variables defined in R’s environment but not in
odin. This is impossible, but you might want to make a parameter,
perhaps.</li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">initial</span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">*</span> <span class="va">r</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span></span></code></pre></div>
<p>This will error because <code>v</code> (referenced by <code>r</code>,
which is referenced by <code>update(a)</code>) is undefined.</p>
</div>
<div class="section level2">
<h2 id="e2007">
<code>E2007</code><a class="anchor" aria-label="anchor" href="#e2007"></a>
</h2>
<p>Trying to use <code>dt</code> in a continuous time (ODE) system. This
is really a special case of <code>E2006</code>, but we treat it
separately because it usually means that something has gone badly with
the system design.</p>
</div>
<div class="section level2">
<h2 id="e2008">
<code>E2008</code><a class="anchor" aria-label="anchor" href="#e2008"></a>
</h2>
<p>An expression assigning as an array did not have a corresponding call
to <code><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim()</a></code>. We always need this, even if it looks like we
should be able to work out how long your array is. You probably just
need to add a call like</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">...</span></span></code></pre></div>
<p>for the variables mentioned in the error, with the appropriate
lengths.</p>
</div>
<div class="section level2">
<h2 id="e2009">
<code>E2009</code><a class="anchor" aria-label="anchor" href="#e2009"></a>
</h2>
<p>You have tried to assign to an array variable (i.e., something with a
<code><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim()</a></code> call) without using <code>[]</code> on the left hand
side.</p>
<p>Example:</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">0</span></span></code></pre></div>
<p>If you wanted a length-5 array of zeros here, you should write</p>
<pre><code><span><span class="va">a</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e2010">
<code>E2010</code><a class="anchor" aria-label="anchor" href="#e2010"></a>
</h2>
<p>Can’t reference data outside of equations that compare to data. You
have tried to reference some data (a variable that exists on the lhs of
a call to <code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code>) from an equation that is used anywhere
other than a comparison expression (involving <code>~</code>, or a
dependency of these equations). You cannot do this, because data do not
exist at this point.</p>
<p>Here’s a trivial example that would error:</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">initial</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="va">d</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Here, <code>d</code> defines some data, and we try to use it from
<code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> but we just can’t do that.</p>
</div>
<div class="section level2">
<h2 id="e2011">
<code>E2011</code><a class="anchor" aria-label="anchor" href="#e2011"></a>
</h2>
<p>Array extents must be determined at system creation. This means that
they cannot be changed when setting parameters into the model, or by
time.</p>
<p>An example that would throw this error:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">n</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"integer"</span><span class="op">)</span></span></code></pre>
<p>Here, parameter is not constant (it can be updated); you can fix this
by writing this as:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">n</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"integer"</span>, constant <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
<p>Similarly, if <code>n</code> depended on <code>time</code>, or if it
was (or depended on) anything stochastic, this would be an error because
then the array dimension would have to change every time step.</p>
</div>
<div class="section level2">
<h2 id="e2012">
<code>E2012</code><a class="anchor" aria-label="anchor" href="#e2012"></a>
</h2>
<p>Assignments to the same variable must all be to arrays. You cannot
write, for example:</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">+</span> <span class="fl">2</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre>
<p>to compute <code>a</code> in two stages.</p>
<p>Sometimes this error will be thrown because you have been
inconsistent with use of array-assignment square brackets, for
example:</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">a</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></code></pre>
<p>Above, the first line probably should have been
<code>a[] &lt;- 0 or</code>a[1] &lt;- 0`.</p>
</div>
<div class="section level2">
<h2 id="e2013">
<code>E2013</code><a class="anchor" aria-label="anchor" href="#e2013"></a>
</h2>
<p>Multiline array equations must be written as consecutive statements,
with no assignments to other variables in between (comments are fine).
So this is an error:</p>
<pre><code><span><span class="va">a</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">a</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">b</span></span></code></pre>
<p>Because the assignment to <code>b</code> occurs within the block of
assignments to <code>a[]</code>. When we evaluate the expressions, all
of the assignments to <code>a</code> will happen in one go (in the order
written) and if you interleave them it gives the false idea of
controlling the flow of equations more than you really can.</p>
</div>
<div class="section level2">
<h2 id="e2014">
<code>E2014</code><a class="anchor" aria-label="anchor" href="#e2014"></a>
</h2>
<p>An equation has a name that shadows a variable. You may have written
something like:</p>
<pre><code><span><span class="fu">initial</span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">2</span></span></code></pre>
<p>which is invalid because <code>a</code> is both an ordinary equation
and also part of the system state.</p>
</div>
<div class="section level2">
<h2 id="e2015">
<code>E2015</code><a class="anchor" aria-label="anchor" href="#e2015"></a>
</h2>
<p>Invalid rank inputs to <code>interpolate()</code>. The time input
(first argument) must always be a vector (rank 1), being a sequence of
times corresponding to the times of inputs to interpolate. The value
input (second argument) will have rank <strong>one greater</strong> than
the output. So:</p>
<ul>
<li>if the output is a scalar, then the value must be a vector</li>
<li>if the output is a vector, the value must be a matrix</li>
<li>if the output is a matrix, the value must be a 3-dimensional
array</li>
</ul>
<p>and so on. This error is thrown where your inputs do not satisfy
these tests.</p>
</div>
<div class="section level2">
<h2 id="e2016">
<code>E2016</code><a class="anchor" aria-label="anchor" href="#e2016"></a>
</h2>
<p>Your system contains unused equations. This is currently always an
error (in odin1 this could be converted to a warning, message or
ignored), and we may allow downgrading this error in a future
version.</p>
<p>Code that would generate this error:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="fu">initial</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">x</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></code></pre>
<p>Here, <code>a</code> is unused. Perhaps it was meant to be an initial
condition, or the amount that <code>x</code> is incremented, but at
present it does nothing.</p>
</div>
<div class="section level2">
<h2 id="e2017">
<code>E2017</code><a class="anchor" aria-label="anchor" href="#e2017"></a>
</h2>
<p>Attempt to browse a phase that does not exist. You have a call
like</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/browser.html" class="external-link">browser</a></span><span class="op">(</span><span class="st">"update"</span><span class="op">)</span></span></code></pre>
<p>in a system of ODEs which does not have an update phase. The error
will indicate which phases are valid.</p>
</div>
<div class="section level2">
<h2 id="e2018">
<code>E2018</code><a class="anchor" aria-label="anchor" href="#e2018"></a>
</h2>
<p>Array rank in expression differs from the rank declared with
<code>dim</code></p>
<p>Here, the number of dimensions for a variable in an expression is
different from the number declared with the <code>dim</code> function,
which is the source of truth for rank. For example, you might declare a
matrix and a 3-dimensional structure like this:-</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">xy</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">xyz</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">parameter</span><span class="op">(</span>rank <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre>
<p>When you use these in other expressions, the rank must match the
declaration above. So these examples would be valid syntax:-</p>
<pre><code><span><span class="fu">initial</span><span class="op">(</span><span class="va">xy</span><span class="op">[</span>, <span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">xyz</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">xyz</span><span class="op">[</span><span class="fl">1</span>, ,<span class="op">]</span><span class="op">)</span></span></code></pre>
<p>but these would not:-</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">xy</span><span class="op">[</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">xyz</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">xyz</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="e2019">
<code>E2019</code><a class="anchor" aria-label="anchor" href="#e2019"></a>
</h2>
<p>The <code>length</code>, <code>ncol</code> and <code>nrow</code>
functions take as their argument a whole array, matrix, or higher-order
structure, without brackets or indexing.</p>
<p>So</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
<p>is valid, but</p>
<pre><code>y &lt;- length(x[, 1]
y &lt;- length(x[])</code></pre>
<p>are both invalid.</p>
</div>
<div class="section level2">
<h2 id="e2020">
<code>E2020</code><a class="anchor" aria-label="anchor" href="#e2020"></a>
</h2>
<p><code>output()</code> was used (on lhs) within a discrete-time
system. You can only use <code>output()</code> within systems that
involve <code><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv()</a></code> as it provides a way of computing variables
for which you do not have derivatives. If you are writing a
discrete-time system, you should use <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> with a
corresponding <code>initial()</code> statement.</p>
</div>
<div class="section level2">
<h2 id="e2021">
<code>E2021</code><a class="anchor" aria-label="anchor" href="#e2021"></a>
</h2>
<p>You have tried to set the dimensions of the same variable more than
once. For example:</p>
<pre><code>dim(a, b) &lt;- 2
dim(b, c) &lt;- 3

# `E2022`

Trying to access an array without using square bracket indexes.  For example if you write:

```r
dim(b) &lt;- 10
a[] &lt;- b</code></pre>
<p>you would see this error, as you should have used <code>b[i]</code>
on the right hand side (<em>probably!</em>; you might have meant
<code>a[] &lt;- b[1]</code>, too).</p>
</div>
<div class="section level2">
<h2 id="e2023">
<code>E2023</code><a class="anchor" aria-label="anchor" href="#e2023"></a>
</h2>
<p>Multiple calls to <code><a href="https://rdrr.io/r/base/browser.html" class="external-link">browser()</a></code> targetting the same phase.
For example</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">time</span> <span class="op">*</span> <span class="fl">2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/browser.html" class="external-link">browser</a></span><span class="op">(</span><span class="st">"update"</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/browser.html" class="external-link">browser</a></span><span class="op">(</span><span class="st">"update"</span><span class="op">)</span></span></code></pre></div>
<p>Because the <code>browser</code> call is always put at the end of the
phase, repeating <code><a href="https://rdrr.io/r/base/browser.html" class="external-link">browser()</a></code> as above does not achieve
anything.</p>
</div>
<div class="section level2">
<h2 id="e2024">
<code>E2024</code><a class="anchor" aria-label="anchor" href="#e2024"></a>
</h2>
<p>Cannot use <code>delay()</code> within a discrete-time system. We can
only support delay differential equation models; delays in discrete-time
systems need to be handled very differently. Let us know if you need
this, but we removed this feature from odin1 in ~2017 and it does not
seem to have been missed.</p>
</div>
<div class="section level2">
<h2 id="e2025">
<code>E2025</code><a class="anchor" aria-label="anchor" href="#e2025"></a>
</h2>
<p>The delay time (<code>by</code> or second argument to
<code>delay()</code>) is not constant, i.e., determined at system
creation. If you are taking this as a parameter, ensure that you have
specified <code>constant = TRUE</code> (this disallows changing the
parameter via <code><a href="https://mrc-ide.github.io/dust2/reference/dust_system_update_pars.html" class="external-link">dust2::dust_system_update_pars()</a></code>). This
requirement stems from our current design of the delay differential
equation solver in dust and we may relax this if it causes
difficulty.</p>
</div>
<div class="section level2">
<h2 id="e2026">
<code>E2026</code><a class="anchor" aria-label="anchor" href="#e2026"></a>
</h2>
<p>Invalid use of the empty index or range operator on the right hand
side of an array expression. You cannot, for example, write</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">b</span> <span class="op">+</span> <span class="va">c</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">b</span> <span class="op">+</span> <span class="va">c</span><span class="op">[</span><span class="va">i</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code></pre></div>
<p>Here, the accesses of <code>c</code> are problematic because they
would refer to a vector. You might have forgotten to write
<code>sum(c[i, ])</code> or some other reduction that would have
converted this into a vector.</p>
<p>This rule does not apply within <code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code> or other
reductions.</p>
</div>
<div class="section level2">
<h2 id="e2027">
<code>E2027</code><a class="anchor" aria-label="anchor" href="#e2027"></a>
</h2>
<p>Delayed expression does not involve any variables. You have tried to
use <code>delay()</code> to delay an expression which does not involve
any of the ODE variables (those that involve <code><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv()</a></code>),
either directly or indirectly. For example:</p>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">delay</span><span class="op">(</span><span class="va">b</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>would throw this error because <code>b</code> is constant over time.
This error usually indicates you have not written the model you intended
to write.</p>
</div>
<div class="section level2">
<h2 id="e2028">
<code>E2028</code><a class="anchor" aria-label="anchor" href="#e2028"></a>
</h2>
<p>Delayed expression involves data (introduced with the
<code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code> function). For example:</p>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/deriv.html" class="external-link">deriv</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="va">d</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">delay</span><span class="op">(</span><span class="va">y</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>Here <code>y</code> involves the variable <code>x</code> but also the
data <code>d</code>, which is not possible.</p>
</div>
<div class="section level2">
<h2 id="e2029">
<code>E2029</code><a class="anchor" aria-label="anchor" href="#e2029"></a>
</h2>
<p>Incompatible dimensionality of delayed expression (first argument to
<code>delay</code>) and the object it is assigned to. A delayed
expression will always be the same dimensionality (a delayed scalar is a
scalar, a delayed matrix is a matrix, etc), so the left hand side of the
<code>delay()</code> call needs to have the same dimensionality (and
size!) as the expression being delayed. For example, this is an
error:</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">*</span> <span class="fl">2</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">delay</span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></code></pre>
<p>because here <code>b</code> is a vector but <code>a</code> is a
scalar.</p>
</div>
<div class="section level2">
<h2 id="e3001">
<code>E3001</code><a class="anchor" aria-label="anchor" href="#e3001"></a>
</h2>
<p>An array access would be out of bounds. This error is thrown where
your code would result in you reading or writing out of bounds on an
array (or a dimension of an array). Currently, we throw this error if we
are certain that your access is invalid. For example, we would error if
your code contains:</p>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">4</span></span></code></pre></div>
<p>because we are accessing <code>a</code> at position 5 due to the loop
over <code>x</code>, but <code>a</code> only has 4 elements.</p>
<p>More complex errors are possible, and it may not be possible to
obviously reverse odin’s chain of logic for deciding an access would be
out of bounds; please let us know if you find difficult-to-explain cases
and we can use these to try and make it clearer.</p>
</div>
<div class="section level2">
<h2 id="e3002">
<code>E3002</code><a class="anchor" aria-label="anchor" href="#e3002"></a>
</h2>
<p>Incompatible sizes in arguments to <code>interpolate()</code>. The
array sizes of the arguments and the “target” (the variable on the left
hand side), must be compatible with each other.</p>
<p>Consider the expression:</p>
<pre><code><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">interpolate</span><span class="op">(</span><span class="va">b</span>, <span class="va">c</span>, <span class="st">"constant"</span><span class="op">)</span></span></code></pre>
<p>The target <code>a</code> can be a scalar, vector or higher
dimensional object. The time argument <code>b</code> is always a vector
(say of length <code>nt</code>) and the value <code>c</code> has
dimensions <code>c(dim(a), nt)</code>; that is the dimensions of
<code>a</code> followed by the number of time elements.</p>
<p>So:</p>
<ul>
<li>if <code>a</code> is a scalar, then <code>c</code> must be a vector
of length <code>nt</code>
</li>
<li>If <code>a</code> is a vector of length <code>n1</code>, then
<code>c</code> must be a matrix with <code>n1</code> rows and
<code>nt</code> columns</li>
<li>If <code>a</code> is a matrix with <code>n1</code> rows and
<code>n2</code> columns, then <code>c</code> must be a 3-dimensional
array with dimensions <code>c(n1, n2, nt)</code> and so on</li>
</ul>
</div>
<div class="section level2">
<h2 id="e3003">
<code>E3003</code><a class="anchor" aria-label="anchor" href="#e3003"></a>
</h2>
<p>We have failed to analyse your bounds correctly, and consider this to
be an odin bug. We can’t continue any further with analysis, but we’d
like to see the model code in order to improve odin. Rerun odin with
<code>check_bounds = "disabled"</code> to skip this error in the
meantime.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn, Wes Hinsley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
